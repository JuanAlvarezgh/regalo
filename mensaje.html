<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>¡Feliz Cumpleaños 19! 🎂</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Quicksand', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      text-align: center;
      padding: 20px;
      position: relative;
      z-index: 10;
    }

    .title {
      font-size: 2.5rem;
      color: #ff6b81;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .cake-container {
      position: relative;
      margin: 40px auto;
      width: 350px;
      height: 400px;
    }

    /* Base de la torta */
    .cake-base {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 280px;
      height: 120px;
      background: linear-gradient(45deg, #ff6b81, #ff8fa3);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      animation: cakeFloat 3s ease-in-out infinite;
    }

    @keyframes cakeFloat {
      0%, 100% { transform: translateX(-50%) translateY(0px); }
      50% { transform: translateX(-50%) translateY(-5px); }
    }

    /* Decoraciones de la base */
    .cake-base::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      height: 20px;
      background: linear-gradient(45deg, #ffeaa7, #fab1a0);
      border-radius: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .cake-base::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: -10px;
      right: -10px;
      height: 20px;
      background: linear-gradient(45deg, #fd79a8, #fdcb6e);
      border-radius: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* Número 19 */
    .number {
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 4rem;
      font-weight: 700;
      color: #fff;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      animation: numberGlow 2s ease-in-out infinite alternate;
    }

    @keyframes numberGlow {
      from { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.5); }
      to { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 30px rgba(255,255,255,0.8); }
    }

    /* Velas */
    .candle {
      position: absolute;
      width: 12px;
      height: 60px;
      background: linear-gradient(to bottom, #ff6b81, #ff8fa3);
      border-radius: 6px;
      top: -50px;
      box-shadow: 0 3px 15px rgba(0,0,0,0.3);
    }

    .candle1 { left: 50%; transform: translateX(-50%); }

    .flame {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 14px;
      height: 20px;
      background: radial-gradient(circle, #ffeb3b 30%, #ff9800 70%);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      animation: flicker 1s ease-in-out infinite alternate;
    }

    @keyframes flicker {
      0% { transform: translateX(-50%) scale(1) rotate(-2deg); }
      50% { transform: translateX(-50%) scale(1.1) rotate(2deg); }
      100% { transform: translateX(-50%) scale(0.9) rotate(-1deg); }
    }

    /* Decoraciones cute */
    .decoration {
      position: absolute;
      border-radius: 50%;
      animation: decorationFloat 4s ease-in-out infinite;
    }

    .decoration1 {
      width: 20px;
      height: 20px;
      background: #ffeaa7;
      top: 30px;
      left: 30px;
      animation-delay: 0s;
    }

    .decoration2 {
      width: 15px;
      height: 15px;
      background: #fd79a8;
      top: 80px;
      right: 40px;
      animation-delay: 1s;
    }

    .decoration3 {
      width: 25px;
      height: 25px;
      background: #74b9ff;
      top: 120px;
      left: 20px;
      animation-delay: 2s;
    }

    .decoration4 {
      width: 18px;
      height: 18px;
      background: #a29bfe;
      top: 60px;
      right: 60px;
      animation-delay: 0.5s;
    }

    @keyframes decorationFloat {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(180deg); }
    }

    /* Mensaje especial */
    .message {
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      margin: 40px 20px;
      max-width: 500px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.3);
      position: relative;
    }

    .message h2 {
      color: #ff6b81;
      font-size: 1.8rem;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .message p {
      color: #2d3436;
      font-size: 1.1rem;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .message .signature {
      color: #ff6b81;
      font-style: italic;
      font-weight: 600;
      margin-top: 20px;
    }

    /* Enlace del contador con reloj cute */
    .contador-link {
      position: absolute;
      bottom: 15px;
      right: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #ff6b81;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.3s ease;
      background: rgba(255,255,255,0.3);
      padding: 8px 12px;
      border-radius: 15px;
      backdrop-filter: blur(5px);
    }

    .contador-link:hover {
      transform: scale(1.05);
      color: #ff8fa3;
      background: rgba(255,255,255,0.5);
    }

    .clock-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ff6b81, #ff8fa3);
      position: relative;
      animation: clockTick 2s ease-in-out infinite;
      box-shadow: 0 2px 8px rgba(255,107,129,0.3);
    }

    @keyframes clockTick {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .clock-icon::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 2px;
      height: 8px;
      background: white;
      transform: translate(-50%, -50%) rotate(90deg);
      transform-origin: center bottom;
      border-radius: 1px;
      animation: hourHand 12s linear infinite;
    }

    .clock-icon::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 1px;
      height: 10px;
      background: white;
      transform: translate(-50%, -50%);
      transform-origin: center bottom;
      border-radius: 1px;
      animation: minuteHand 1s linear infinite;
    }

    @keyframes hourHand {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    @keyframes minuteHand {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Botón para soplar velas */
    .blow-button {
      background: linear-gradient(45deg, #ff6b81, #ff8fa3);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255,107,129,0.4);
      transition: all 0.3s ease;
      margin: 20px 0;
      font-family: 'Quicksand', sans-serif;
    }

    .blow-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255,107,129,0.6);
    }

    .blow-button:active {
      transform: translateY(0);
    }

    /* Botón para mostrar carta */
    .letter-button {
      background: linear-gradient(45deg, #a29bfe, #74b9ff);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(162,155,254,0.4);
      transition: all 0.3s ease;
      margin: 20px 0;
      font-family: 'Quicksand', sans-serif;
    }

    .letter-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(162,155,254,0.6);
    }

    .letter-button:active {
      transform: translateY(0);
    }

    /* Confeti mejorado */
    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      width: 12px;
      height: 12px;
      opacity: 0.9;
    }

    .confetti-circle {
      border-radius: 50%;
    }

    .confetti-square {
      border-radius: 2px;
    }

    .confetti-triangle {
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 12px solid;
    }

    .confetti-star {
      position: relative;
      display: inline-block;
      width: 0;
      height: 0;
    }

    .confetti-star:before,
    .confetti-star:after {
      content: '';
      position: absolute;
      left: -6px;
      top: -4px;
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 8px solid;
      transform: rotate(35deg);
    }

    .confetti-star:after {
      transform: rotate(-35deg);
    }

    .confetti-heart {
      width: 12px;
      height: 10px;
      position: relative;
      transform: rotate(-45deg);
    }

    .confetti-heart:before,
    .confetti-heart:after {
      content: '';
      width: 6px;
      height: 10px;
      position: absolute;
      left: 6px;
      background: inherit;
      border-radius: 6px 6px 0 0;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }

    .confetti-heart:after {
      left: 0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }

    @keyframes confetti-fall-1 {
      0% {
        transform: translateY(-100vh) rotate(0deg) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg) scale(0.8);
        opacity: 0;
      }
    }

    @keyframes confetti-fall-2 {
      0% {
        transform: translateY(-100vh) rotate(0deg) scale(1);
        opacity: 1;
      }
      50% {
        opacity: 1;
        transform: translateY(50vh) rotate(180deg) scale(1.2);
      }
      100% {
        transform: translateY(100vh) rotate(360deg) scale(0.6);
        opacity: 0;
      }
    }

    @keyframes confetti-fall-3 {
      0% {
        transform: translateY(-100vh) rotate(0deg) scale(1) translateX(0);
        opacity: 1;
      }
      25% {
        transform: translateY(25vh) rotate(90deg) scale(1.1) translateX(20px);
      }
      50% {
        transform: translateY(50vh) rotate(180deg) scale(0.9) translateX(-20px);
      }
      75% {
        transform: translateY(75vh) rotate(270deg) scale(1.2) translateX(15px);
      }
      100% {
        transform: translateY(100vh) rotate(360deg) scale(0.7) translateX(0);
        opacity: 0;
      }
    }

    @keyframes confetti-sway {
      0%, 100% { transform: translateX(0) rotate(0deg); }
      25% { transform: translateX(20px) rotate(90deg); }
      50% { transform: translateX(-15px) rotate(180deg); }
      75% { transform: translateX(10px) rotate(270deg); }
    }

    /* Sparkles para efecto extra */
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #fff;
      border-radius: 50%;
      animation: sparkle-twinkle 1s ease-in-out infinite alternate;
    }

    @keyframes sparkle-twinkle {
      0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: scale(1) rotate(180deg);
        opacity: 0;
      }
    }

    /* Estilos para la carta digital */
    .carta-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 20px;
      box-sizing: border-box;
    }

    .carta-container {
      background: #f8f4e6;
      max-width: 600px;
      width: 100%;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      max-height: 90vh;
      overflow-y: auto;
    }

    .carta-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="lines" patternUnits="userSpaceOnUse" width="100" height="4"><line x1="0" y1="2" x2="100" y2="2" stroke="%23e0d5b7" stroke-width="0.5"/></pattern></defs><rect width="100%" height="100%" fill="url(%23lines)"/></svg>');
      opacity: 0.3;
      pointer-events: none;
    }

    .encabezado {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      z-index: 1;
    }

    .fecha {
      font-size: 14px;
      color: #8B4513;
      margin-bottom: 10px;
      font-style: italic;
    }

    .titulo-carta {
      font-family: 'Dancing Script', cursive;
      font-size: 32px;
      color: #2c3e50;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .subtitulo {
      font-size: 16px;
      color: #7f8c8d;
    }

    .contenido-carta {
      position: relative;
      z-index: 1;
      line-height: 1.8;
      color: #2c3e50;
      font-size: 16px;
      font-family: 'Playfair Display', serif;
    }

    .parrafo {
      margin-bottom: 20px;
      min-height: 20px;
    }

    .cursor {
      display: inline-block;
      background-color: #2c3e50;
      width: 2px;
      height: 20px;
      animation: blink 1s infinite;
      margin-left: 2px;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .firma-carta {
      margin-top: 40px;
      text-align: right;
      font-family: 'Dancing Script', cursive;
      font-size: 24px;
      color: #8B4513;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .cerrar-carta {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      font-size: 30px;
      color: #2c3e50;
      cursor: pointer;
      z-index: 10;
    }

    .cerrar-carta:hover {
      color: #ff6b81;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .title {
        font-size: 2rem;
      }
      
      .cake-container {
        width: 300px;
        height: 350px;
      }
      
      .cake-base {
        width: 240px;
        height: 100px;
      }
      
      .number {
        font-size: 3rem;
      }
      
      .message {
        margin: 20px 15px;
        padding: 25px;
      }

      .contador-link {
        position: static;
        margin-top: 15px;
        align-self: flex-end;
      }

      .carta-container {
        padding: 30px;
        margin: 10px;
      }

      .titulo-carta {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">🎉 ¡Feliz Cumpleaños 19! 🎉</h1>
    
    <div class="cake-container">
      <div class="cake-base">
        <div class="number">19</div>
        <div class="candle candle1">
          <div class="flame"></div>
        </div>
      </div>
      
      <div class="decoration decoration1"></div>
      <div class="decoration decoration2"></div>
      <div class="decoration decoration3"></div>
      <div class="decoration decoration4"></div>
    </div>
    
    <button class="blow-button" onclick="blowCandles()">
      🌬️ Sopla la vela y pide un deseo
    </button>

    <button class="letter-button" onclick="mostrarCarta()">
      💌 Carta
    </button>
    
    <div class="message">
      <h2>💕 Teamo Miamor 💕</h2>
      <p>¡Hoy cumples 19 años! 🎂</p>
      <p>Cada día a tu lado es un regalo especial. Tu amor hace que todo sea más hermoso. ✨</p>
      <p>Que este nuevo año cumplas tus sueños y ojala podamos redimir más momentos únicos. 🌟</p>
      <p>Gracias por ser la persona más especial en mi vida. Te amo más de lo que las palabras pueden expresar. 💖</p>
      <div class="signature">Con todo mi amor, Juanca 💕</div>
      
      <a href="cuentaregresiva.html" class="contador-link">
        <div class="clock-icon"></div>
        <span></span>
      </a>
    </div>
  </div>

  <!-- Container para el confeti -->
  <div class="confetti-container" id="confettiContainer"></div>

  <!-- Overlay de la carta -->
  <div class="carta-overlay" id="cartaOverlay">
    <div class="carta-container">
      <button class="cerrar-carta" onclick="cerrarCarta()">×</button>
      
      <div class="encabezado">
        <div class="fecha">Medellín, 19 de julio de 2025</div>
        <div class="titulo-carta">Para vale</div>
        <div class="subtitulo">Mi princesita hermosa</div>
      </div>
      
      <div class="contenido-carta">
        <div class="parrafo" id="parrafo1"></div>
        <div class="parrafo" id="parrafo2"></div>
        <div class="parrafo" id="parrafo3"></div>
        <div class="parrafo" id="parrafo4"></div>
      </div>
      
      <div class="firma-carta" id="firmaCarta">
        Con todo mi amor,<br>
        Juanca 💖
      </div>
    </div>
  </div>

  <script>
    const textosCarta = [
      "Mientras escribo estas líneas y te preparo este regalo, se me llena el alma de nostalgia y de una inmensa tristeza al recordar que estás tan lejos de mí. Quiero que sepas que eres la razón de mi existir, de mi alegría y de mi sentido de vida.",

      "Eres la dueña de esa linda sonrisa nerviosa que me quita todos los pesares del alma y me hace recordar cada uno de los momentos más hermosos que pasé contigo. Recuerdo nuestras largas conversaciones hasta desvelarnos, nuestras risas, nuestras salidas improvisadas y nuestros momentos más íntimos. También esos instantes donde nunca había silencios incómodos porque siempre tenías algo que decir. Incluso recuerdo nuestras peleas y, por ende, nuestras reconciliaciones, que me hacen entender que estoy con la persona correcta. Cada experiencia está y estará guardada en mi corazón.",

      "Mi amor, sueño con construir un sinfín de recuerdos más a tu lado. Anhelo seguir viviendo cada minuto contigo, ser tu apoyo y entregarte todo el cariño que mi corazón puede ofrecer.",
    ];
    
    let parrafoActual = 0;
    let charIndex = 0;
    let cartaAbierta = false;
    
    function typeWriter() {
      if (parrafoActual < textosCarta.length) {
        const elemento = document.getElementById(`parrafo${parrafoActual + 1}`);
        const textoCompleto = textosCarta[parrafoActual];
        
        if (charIndex < textoCompleto.length) {
          elemento.innerHTML = textoCompleto.substring(0, charIndex + 1) + '<span class="cursor"></span>';
          charIndex++;
          setTimeout(typeWriter, 50);
        } else {
          elemento.innerHTML = textoCompleto;
          parrafoActual++;
          charIndex = 0;
          setTimeout(typeWriter, 1000);
        }
      } else {
        setTimeout(() => {
          document.getElementById('firmaCarta').style.opacity = '1';
        }, 500);
      }
    }

    function mostrarCarta() {
      document.getElementById('cartaOverlay').style.display = 'flex';
      cartaAbierta = true;
      
      // Reiniciar variables
      parrafoActual = 0;
      charIndex = 0;
      
      // Limpiar párrafos
      for (let i = 1; i <= 4; i++) {
        document.getElementById(`parrafo${i}`).innerHTML = '';
      }
      document.getElementById('firmaCarta').style.opacity = '0';
      
      // Iniciar escritura
      setTimeout(typeWriter, 1000);
    }

    function cerrarCarta() {
      document.getElementById('cartaOverlay').style.display = 'none';
      cartaAbierta = false;
    }

    function createAdvancedConfetti() {
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ['#ff6b81', '#ffeaa7', '#fd79a8', '#74b9ff', '#a29bfe', '#fdcb6e', '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3'];
      const shapes = ['circle', 'square', 'triangle', 'star', 'heart'];
      const animations = ['confetti-fall-1', 'confetti-fall-2', 'confetti-fall-3'];
      
      // Crear múltiples oleadas de confeti
      for (let wave = 0; wave < 3; wave++) {
        setTimeout(() => {
          for (let i = 0; i < 80; i++) {
            const confetti = document.createElement('div');
            const shape = shapes[Math.floor(Math.random() * shapes.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const animation = animations[Math.floor(Math.random() * animations.length)];
            
            confetti.className = `confetti-piece confetti-${shape}`;
            
            // Posición inicial aleatoria
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.top = '-20px';
            
            // Color basado en la forma
            if (shape === 'triangle') {
              confetti.style.borderBottomColor = color;
            } else if (shape === 'star') {
              confetti.style.setProperty('--star-color', color);
              confetti.innerHTML = `<style>
                .confetti-star:before, .confetti-star:after {
                  border-bottom-color: ${color};
                }
              </style>`;
            } else {
              confetti.style.backgroundColor = color;
            }
            
            // Animación y duración aleatoria
            const duration = (Math.random() * 3 + 3) + 's';
            const delay = Math.random() * 0.5 + 's';
            
            confetti.style.animation = `${animation} ${duration} ${delay} ease-out forwards`;
            confetti.style.transform = `scale(${Math.random() * 0.5 + 0.8})`;
            
            // Añadir efecto de rotación adicional
            if (Math.random() > 0.5) {
              confetti.style.animation += `, confetti-sway ${duration} ${delay} ease-in-out infinite`;
            }
            
            confettiContainer.appendChild(confetti);
            
            // Remover después de la animación
            setTimeout(() => {
              if (confetti.parentNode) {
                confetti.parentNode.removeChild(confetti);
              }
            }, 6000);
          }
          
          // Agregar sparkles para efecto extra
          for (let j = 0; j < 30; j++) {
            setTimeout(() => {
              createSparkle();
            }, Math.random() * 2000);
          }
        }, wave * 500);
      }
    }

    function createSparkle() {
      const confettiContainer = document.getElementById('confettiContainer');
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      
      sparkle.style.left = Math.random() * 100 + '%';
      sparkle.style.top = Math.random() * 100 + '%';
      sparkle.style.animationDelay = Math.random() * 1 + 's';
      
      confettiContainer.appendChild(sparkle);
      
      setTimeout(() => {
        if (sparkle.parentNode) {
          sparkle.parentNode.removeChild(sparkle);
        }
      }, 2000);
    }

    // Función para crear explosión de confeti desde un punto específico
    function createConfettiExplosion(x, y) {
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ['#ff6b81', '#ffeaa7', '#fd79a8', '#74b9ff', '#a29bfe', '#fdcb6e'];
      
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'confetti-piece confetti-circle';
        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.width = (Math.random() * 8 + 4) + 'px';
        particle.style.height = particle.style.width;
        
        const angle = (Math.PI * 2 * i) / 30;
        const velocity = Math.random() * 150 + 50;
        const gravity = 0.8;
        const friction = 0.95;
        
        let vx = Math.cos(angle) * velocity;
        let vy = Math.sin(angle) * velocity;
        let posX = x;
        let posY = y;
        
        confettiContainer.appendChild(particle);
        
        function animateParticle() {
          vx *= friction;
          vy = vy * friction + gravity;
          posX += vx * 0.02;
          posY += vy * 0.02;
          
          particle.style.transform = `translate(${posX - x}px, ${posY - y}px) rotate(${posX * 0.1}deg)`;
          particle.style.opacity = Math.max(0, 1 - (posY - y) / 300);
          
          if (posY < window.innerHeight + 100 && particle.style.opacity > 0) {
            requestAnimationFrame(animateParticle);
          } else {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }
        }
        
        requestAnimationFrame(animateParticle);
      }
    }

    function blowCandles() {
      const flames = document.querySelectorAll('.flame');
      const button = document.querySelector('.blow-button');
      
      // Crear explosión de confeti desde el botón
      const buttonRect = button.getBoundingClientRect();
      const buttonCenterX = buttonRect.left + buttonRect.width / 2;
      const buttonCenterY = buttonRect.top + buttonRect.height / 2;
      
      createConfettiExplosion(buttonCenterX, buttonCenterY);
      
      flames.forEach(flame => {
        flame.style.animation = 'none';
        flame.style.opacity = '0';
        flame.style.transform = 'translateX(-50%) scale(0)';
      });
      
      button.textContent = '🎉 ¡Deseo cumplido!';
      button.style.background = 'linear-gradient(45deg, #00b894, #00cec9)';
      
      // Confeti avanzado después de un pequeño delay
      setTimeout(() => {
        createAdvancedConfetti();
      }, 300);
      
      setTimeout(() => {
        alert('🎊 ¡Que todos tus deseos se hagan realidad! Te amo mucho 💕');
      }, 1000);
      
      setTimeout(() => {
        flames.forEach(flame => {
          flame.style.animation = 'flicker 1s ease-in-out infinite alternate';
          flame.style.opacity = '1';
          flame.style.transform = 'translateX(-50%) scale(1)';
        });
        button.textContent = '🌬️ Sopla las velas y pide un deseo';
        button.style.background = 'linear-gradient(45deg, #ff6b81, #ff8fa3)';
      }, 5000);
    }

    // Confeti inicial más sutil
    function createInitialConfetti() {
      const confettiContainer = document.getElementById('confettiContainer');
      const colors = ['#ff6b81', '#ffeaa7', '#fd79a8', '#74b9ff', '#a29bfe'];
      
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti-piece confetti-circle';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.top = '-20px';
          confetti.style.width = (Math.random() * 6 + 4) + 'px';
          confetti.style.height = confetti.style.width;
          confetti.style.animation = `confetti-fall-1 ${Math.random() * 2 + 4}s ease-out forwards`;
          confetti.style.opacity = '0.7';
          
          confettiContainer.appendChild(confetti);
          
          setTimeout(() => {
            if (confetti.parentNode) {
              confetti.parentNode.removeChild(confetti);
            }
          }, 6000);
        }, Math.random() * 3000);
      }
    }

    // Confeti inicial
    setTimeout(createInitialConfetti, 1000);

    // Cerrar carta con ESC
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && cartaAbierta) {
        cerrarCarta();
      }
    });
  </script>
</body>
</html>